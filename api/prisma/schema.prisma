generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Client {
  id            BigInt   @id @default(autoincrement())
  email         String   @unique
  name          String
  account       Account  @relation(fields: [accountNumber], references: [number])
  accountNumber Int
  creationDate  DateTime
  updateDate    DateTime
}

model Account {
  id               BigInt        @id @default(autoincrement())
  number           Int           @unique
  balance          Decimal
  originAccount    Transaction[] @relation("originAccount")
  secondaryAccount Transaction[] @relation("secondaryAccount")
  Client           Client[]
}

model Transaction {
  id                     BigInt          @id @default(autoincrement())
  amount                 Decimal
  type                   TransactionType
  originAccountNumber    Int
  secondaryAccountNumber Int?
  originAccount          Account         @relation("originAccount", fields: [originAccountNumber], references: [number])
  secondaryAccount       Account?        @relation("secondaryAccount", fields: [secondaryAccountNumber], references: [number])
}

enum TransactionType {
  DEPOSITO
  SAQUE
  TRANSFERENCIA
}
